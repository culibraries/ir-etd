{"version":3,"sources":["index-json2html.js","jquery-json2html.js","json2html.js","main.js","map.js"],"names":["visualize","json","$","html","json2html","convert","transforms","object","regEvents","getValue","obj","type","children","transform","name","show","undefined","len","length","j","prop","value","click","parent","this","hasClass","removeClass","addClass","tag","class","classes","push","join","fn","_options","options","append","replace","prepend","eventData","extend","events","each","result","dom","document","createElement","i","event","find","id","removeAttr","on","data","e","action","call","replaceWith","jQuery","out","_extend","JSON","parse","_transform","obj1","obj2","obj3","attrname","_append","concat","_isArray","Object","prototype","toString","elements","_apply","index","element","t_len","t","_getValue","key","temp","isEvent","substring","toLowerCase","_guid","val","S4","Math","random","_tokenizer","src","real","re","all","components","split","useObj","outVal","c_len","newObj","tokenizers","doBuild","splice","ended","tokens","next","build","tkn","plain","self","findMin","slice","min","idx","test","refreshSideBar","hide","empty","getOldestArchive","done","res","text","getArchives","displayArchives","parseArchiveFiles","pdfFile","contents","file","ext","substr","archiveUrl","preFillForm","xmlData","map","dfd","Deferred","after","rows","calcRows","scrollHeight","attr","resolve","promise","archives","round","stripChars","str","mapObj","@attributes","DISS_","matched","ajax","url","success","status","error","xhr","desc","err","console","log","getOneArchive","archive","datatype","getJsonFromXml","postFormData","serialize","currentArchive","ready","mapFunc","readyUrl","target","attributes","itemtype","textContent","description","title","toTitleCase","categorization","keyword","concatParas","content","abstract","para","authorship","author","fname","middle","surname","suffix","contact","email","institution","inst_name","cmte_member","inst_contact","degree","embargoDate","embargo_code","dates","comp_date","String","lowers","uppers","txt","charAt","toUpperCase","RegExp","code","now","Date","day","getDate","month","getMonth","today","getFullYear","paras"],"mappings":"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","file":"../bundle.min.js","sourcesContent":["//Copyright (c) 2013 Crystalline Technologies\n//\n//  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'),\n//  to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, \n//  and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//  THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, \n//  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar transforms = {\n\t'object':{'tag':'div','class':'package ${show} ${type}','children':[\n\t\t{'tag':'div','class':'header','children':[\n\t\t\t{'tag':'div','class':function(obj){\n\n\t\t\t\tvar classes = [\"arrow\"];\n\n\t\t\t\tif( getValue(obj.value) !== undefined ) classes.push(\"hide\");\n\t\t\t\t\n\t\t\t\treturn(classes.join(' '));\n\t\t\t}},\n\t\t\t{'tag':'span','class':'name','html':'${name}'},\n\t\t\t{'tag':'span','class':'value','html':function(obj) {\n\t\t\t\tvar value = getValue(obj.value);\n\t\t\t\tif( value !== undefined ) return(\" : \" + value);\n\t\t\t\telse return('');\n\t\t\t}},\n\t\t\t{'tag':'span','class':'type','html':'${type}'}\n\t\t]},\n\t\t{'tag':'div','class':'children','children':function(obj){return(children(obj.value));}}\n\t]}\n};\n\nfunction visualize(json) {\n\t\n\t$('#top').html('');\n\n\t$('#top').json2html(convert('json',json,'open'),transforms.object);\n\n\tregEvents();\t\t\n}\n\nfunction getValue(obj) {\n\tvar type = $.type(obj);\n\n\t//Determine if this object has children\n\tswitch(type) {\n\t\tcase 'array':\n\t\tcase 'object':\n\t\t\treturn(undefined);\n\t\tbreak;\n\n\t\tcase 'function':\n\t\t\t//none\n\t\t\treturn('function');\n\t\tbreak;\n\n\t\tcase 'string':\n\t\t\treturn(\"'\" + obj + \"'\");\n\t\tbreak;\n\n\t\tdefault:\n\t\t\treturn(obj);\n\t\tbreak;\n\t}\n}\n\n//Transform the children\nfunction children(obj){\n\tvar type = $.type(obj);\n\n\t//Determine if this object has children\n\tswitch(type) {\n\t\tcase 'array':\n\t\tcase 'object':\n\t\t\treturn(json2html.transform(obj,transforms.object));\n\t\tbreak;\n\n\t\tdefault:\n\t\t\t//This must be a litteral\n\t\tbreak;\n\t}\n}\n\nfunction convert(name,obj,show) {\n\t\n\tvar type = $.type(obj);\n\n\tif(show === undefined) show = 'closed';\n\t\n\tvar children = [];\n\n\t//Determine the type of this object\n\tswitch(type) {\n\t\tcase 'array':\n\t\t\t//Transform array\n\t\t\t//Itterrate through the array and add it to the elements array\n\t\t\tvar len=obj.length;\n\t\t\tfor(var j=0;j<len;++j){\t\n\t\t\t\t//Concat the return elements from this objects tranformation\n\t\t\t\tchildren[j] = convert(j,obj[j]);\n\t\t\t}\n\t\tbreak;\n\n\t\tcase 'object':\n\t\t\t//Transform Object\n\t\t\tvar j = 0;\n\t\t\tfor(var prop in obj) {\n\t\t\t\tchildren[j] = convert(prop,obj[prop]);\n\t\t\t\tj++;\n\t\t\t}\t\n\t\tbreak;\n\n\t\tdefault:\n\t\t\t//This must be a litteral (or function)\n\t\t\tchildren = obj;\n\t\tbreak;\n\t}\n\n\treturn( {'name':name,'value':children,'type':type,'show':show} );\n\t\n}\n\nfunction regEvents() {\n\n\t$('.header').click(function(){\n\t\tvar parent = $(this).parent();\n\n\t\tif(parent.hasClass('closed')) {\n\t\t\tparent.removeClass('closed');\n\t\t\tparent.addClass('open');\n\t\t} else {\n\t\t\tparent.removeClass('open');\n\t\t\tparent.addClass('closed');\n\t\t}\t\t\n\t});\n}","//Copyright (c) 2013 Crystalline Technologies\n//\n//  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'),\n//  to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, \n//  and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//  THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, \n//  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n(function($){\t\n\n\t//Main method\n\t$.fn.json2html = function(json, transform, _options){\t\n\t\t\n\t\t//Make sure we have the json2html base loaded\n\t\tif(typeof json2html === 'undefined') return(undefined);\n\n\t\t//Default Options\n\t\tvar options = {\n\t\t\t'append':true,\n\t\t\t'replace':false,\n\t\t\t'prepend':false,\n\t\t\t'eventData':{}\n\t\t};\n\n\t\t//Extend the options (with defaults)\n\t\tif( _options !== undefined ) $.extend(options, _options);\n\n\t\t//Insure that we have the events turned (Required)\n\t\toptions.events = true;\n\t\t\n\t\t//Make sure to take care of any chaining\n\t\treturn this.each(function(){ \n\t\t\t\n\t\t\t//let json2html core do it's magic\n\t\t\tvar result = json2html.transform(json, transform, options);\n\t\t\t\n\t\t\t//Attach the html(string) result to the DOM\n\t\t\tvar dom = $(document.createElement('i')).html(result.html);\n\n\t\t\t//Determine if we have events\n\t\t\tfor(var i = 0; i < result.events.length; i++) {\n\t\t\t\t\n\t\t\t\tvar event = result.events[i];\n\n\t\t\t\t//find the associated DOM object with this event\n\t\t\t\tvar obj = $(dom).find(\"[json2html-event-id-\"+event.type+\"='\" + event.id + \"']\");\n\n\t\t\t\t//Check to see if we found this element or not\n\t\t\t\tif(obj.length === 0) throw 'jquery.json2html was unable to attach event ' + event.id + ' to DOM';\n\t\t\t\t\n\t\t\t\t//remove the attribute\n\t\t\t\t$(obj).removeAttr('json2html-event-id-'+event.type);\n\n\t\t\t\t//attach the event\n\t\t\t\t$(obj).on(event.type,event.data,function(e){\n\t\t\t\t\t//attach the jquery event\n\t\t\t\t\te.data.event = e;\n\n\t\t\t\t\t//call the appropriate method\n\t\t\t\t\te.data.action.call($(this),e.data);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Append it to the appropriate element\n\t\t\tif (options.replace) $.fn.replaceWith.call($(this),$(dom).children());\n\t\t\telse if (options.prepend) $.fn.prepend.call($(this),$(dom).children());\n\t\t\telse $.fn.append.call($(this),$(dom).children());\n\t\t});\n\t};\n})(jQuery);\n","//Copyright (c) 2013 Crystalline Technologies\n//\n//  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'),\n//  to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, \n//  and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//  THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, \n//  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar json2html = {\n\t\n\t/* ---------------------------------------- Public Methods ------------------------------------------------ */\n\t'transform': function(json,transform,_options) {\n\t\t\n\t\t//create the default output\n\t\tvar out = {'events':[],'html':''};\n\t\t\n\t\t//default options (by default we don't allow events)\n\t\tvar options = {\n\t\t\t'events':false\n\t\t};\n\t\t\n\t\t//extend the options\n\t\toptions = json2html._extend(options,_options);\n\n\t\t//Make sure we have a transform & json object\n\t\tif( transform !== undefined || json !== undefined ) {\n\n\t\t\t//Normalize strings to JSON objects if necessary\n\t\t\tvar obj = typeof json === 'string' ? JSON.parse(json) : json;\n\t\t\t\n\t\t\t//Transform the object (using the options)\n\t\t\tout = json2html._transform(obj, transform, options);\n\t\t}\n\t\t\n\t\t//determine if we need the events\n\t\t// otherwise return just the html string\n\t\tif(options.events) return(out);\n\t\t\telse return( out.html );\n\t},\n\t\n\t/* ---------------------------------------- Private Methods ------------------------------------------------ */\n\t\n\t//Extend options\n\t'_extend':function(obj1,obj2){\n\t\tvar obj3 = {};\n\t\tfor (var attrname in obj1) { obj3[attrname] = obj1[attrname]; }\n\t\tfor (var attrname in obj2) { obj3[attrname] = obj2[attrname]; }\n\t\treturn obj3;\n\t},\n\t\n\t//Append results\n\t'_append':function(obj1,obj2) {\n\t\tvar out = {'html':'','event':[]};\n\t\tif(typeof obj1 !== 'undefined' && typeof obj2 !== 'undefined') {\n\t\t\tout.html = obj1.html + obj2.html;\n\n\t\t\tout.events = obj1.events.concat(obj2.events);\n\t\t}\n\n\t\treturn(out);\n\t},\n\n\t//isArray (fix for IE prior to 9)\n\t'_isArray':function(obj) {\n\t\treturn Object.prototype.toString.call(obj) === '[object Array]';\n\t},\n\t\n\t//Transform object\n\t'_transform':function(json, transform, options) {\n\t\t\n\t\tvar elements = {'events':[],'html':''};\n\t\t\n\t\t//Determine the type of this object\n\t\tif(json2html._isArray(json)) {\n\t\t\t\n\t\t\t//Itterrate through the array and add it to the elements array\n\t\t\tvar len=json.length;\n\t\t\tfor(var j=0;j<len;++j) {\t\n\t\t\t\t//Apply the transform to this object and append it to the results\n\t\t\t\telements = json2html._append(elements,json2html._apply(json[j], transform, j, options));\n\t\t\t}\n\n\t\t} else if(typeof json === 'object') {\n\n\t\t\t//Apply the transform to this object and append it to the results\n\t\t\telements = json2html._append(elements,json2html._apply(json, transform, undefined, options));\n\t\t}\n\n\t\t//Return the resulting elements\n\t\treturn(elements);\t\t\n\t},\n\n\t//Apply the transform at the second level\n\t'_apply':function(obj, transform, index, options) {\n\n\t\tvar element = {'events':[],'html':''};\n\t\t\n\t\t//Itterate through the transform and create html as needed\n\t\tif(json2html._isArray(transform)) {\n\t\t\t\n\t\t\tvar t_len = transform.length;\n\t\t\tfor(var t=0; t < t_len; ++t) {\n\t\t\t\t//transform the object and append it to the output\n\t\t\t\telement = json2html._append(element,json2html._apply(obj, transform[t], index, options));\n\t\t\t}\n\n\t\t} else if(typeof transform === 'object') {\n\n\t\t\t//Get the tag element of this transform\n\t\t\tif( transform.tag !== undefined ) {\n\n\t\t\t\tvar tag = json2html._getValue(obj,transform,'tag',index);\n\n\t\t\t\t//Create a new element\n\t\t\t\telement.html += '<' + tag;\n\n\t\t\t\t//Create a new object for the children\n\t\t\t\tvar children = {'events':[],'html':''};\n\t\t\t\t\n\t\t\t\t//innerHTML\n\t\t\t\tvar html;\n\n\t\t\t\t//Look into the properties of this transform\n\t\t\t\tfor (var key in transform) {\n\n\t\t\t\t\tswitch(key) {\n\t\t\t\t\t\tcase 'tag':\n\t\t\t\t\t\t\t//Do nothing as we have already created the element from the tag\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'children':\n\t\t\t\t\t\t\t//Add the children\n\t\t\t\t\t\t\tif(json2html._isArray(transform.children)) {\n\n\t\t\t\t\t\t\t\t//Apply the transform to the children\n\t\t\t\t\t\t\t\tchildren = json2html._append(children,json2html._apply(obj, transform.children, index, options));\n\t\t\t\t\t\t\t} else if(typeof transform.children === 'function') {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//Get the result from the function\n\t\t\t\t\t\t\t\tvar temp = transform.children.call(obj, obj, index);\n\n\t\t\t\t\t\t\t\t//Make sure we have an object result with the props\n\t\t\t\t\t\t\t\t// html (string), events (array)\n\t\t\t\t\t\t\t\t// OR a string (then just append it to the children\n\t\t\t\t\t\t\t\tif(typeof temp === 'object') {\n\t\t\t\t\t\t\t\t\t//make sure this object is a valid json2html response object\n\t\t\t\t\t\t\t\t\tif(temp.html !== undefined && temp.events !== undefined) children = json2html._append(children,temp);\n\t\t\t\t\t\t\t\t} else if(typeof temp === 'string') {\n\n\t\t\t\t\t\t\t\t\t//append the result directly to the html of the children\n\t\t\t\t\t\t\t\t\tchildren.html += temp;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'html':\n\t\t\t\t\t\t\t//Create the html attribute for this element\n\t\t\t\t\t\t\thtml = json2html._getValue(obj,transform,'html',index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t//Add the property as a attribute if it's not a key one\n\t\t\t\t\t\t\tvar isEvent = false;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//Check if the first two characters are 'on' then this is an event\n\t\t\t\t\t\t\tif( key.length > 2 )\n\t\t\t\t\t\t\t\tif(key.substring(0,2).toLowerCase() == 'on') {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t//Determine if we should add events\n\t\t\t\t\t\t\t\t\tif(options.events) {\n\n\t\t\t\t\t\t\t\t\t\t//if so then setup the event data\n\t\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t'action':transform[key],\n\t\t\t\t\t\t\t\t\t\t\t'obj':obj,\n\t\t\t\t\t\t\t\t\t\t\t'data':options.eventData,\n\t\t\t\t\t\t\t\t\t\t\t'index':index\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t//create a new id for this event\n\t\t\t\t\t\t\t\t\t\tvar id = json2html._guid();\n\n\t\t\t\t\t\t\t\t\t\t//append the new event to this elements events\n\t\t\t\t\t\t\t\t\t\telement.events[element.events.length] = {'id':id,'type':key.substring(2),'data':data};\n\n\t\t\t\t\t\t\t\t\t\t//Insert temporary event property (json2html-event-id) into the element\n\t\t\t\t\t\t\t\t\t\telement.html += \" json2html-event-id-\"+key.substring(2)+\"='\" + id + \"'\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//this is an event\n\t\t\t\t\t\t\t\t\tisEvent = true;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//If this wasn't an event AND we actually have a value then add it as a property\n\t\t\t\t\t\t\tif( !isEvent){\n\t\t\t\t\t\t\t\t//Get the value\n\t\t\t\t\t\t\t\tvar val = json2html._getValue(obj, transform, key, index);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//Make sure we have a value\n                                if(val !== undefined) {\n                                    var out;\n                                    \n                                    //Determine the output type of this value (wrap with quotes)\n                                    if(typeof val === 'string') out = '\"' + val.replace(/\"/g, '&quot;') + '\"';\n                                    else out = val;\n                                    \n                                    //creat the name value pair\n\t\t\t\t\t\t\t\t    element.html += ' ' + key + '=' + out;\n                                }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//close the opening tag\n\t\t\t\telement.html += '>';\n\t\t\t\t\n\t\t\t\t//add the innerHTML (if we have any)\n\t\t\t\tif(html) element.html += html;\n\n\t\t\t\t//add the children (if we have any)\n\t\t\t\telement = json2html._append(element,children);\n\n\t\t\t\t//add the closing tag\n\t\t\t\telement.html += '</' + tag + '>';\n\t\t\t}\n\t\t}\n\t\t\n\t\t//Return the output object\n\t\treturn(element);\n\t},\n\n\t//Get a new GUID (used by events)\n\t'_guid':function() {\n\t\tvar S4 = function() {\n\t\t   return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n\t\t};\n\t\treturn (S4()+S4()+\"-\"+S4()+S4()+\"-\"+S4()+S4());\n\t},\n\n\t//Get the html value of the object\n\t'_getValue':function(obj, transform, key,index) {\n\t\t\n\t\tvar out = '';\n\t\t\n\t\tvar val = transform[key];\n\t\tvar type = typeof val;\n\t\t\n\t\tif (type === 'function') {\n\t\t\treturn(val.call(obj,obj,index));\n\t\t} else if (type === 'string') {\n\t\t\tvar _tokenizer = new json2html._tokenizer([\n\t\t\t\t/\\$\\{([^\\}\\{]+)\\}/\n\t\t\t],function( src, real, re ){\n\t\t\t\treturn real ? src.replace(re,function(all,name){\n\t\t\t\t\t\n\t\t\t\t\t//Split the string into it's seperate components\n\t\t\t\t\tvar components = name.split('.');\n\n\t\t\t\t\t//Set the object we use to query for this name to be the original object\n\t\t\t\t\tvar useObj = obj;\n\n\t\t\t\t\t//Output value\n\t\t\t\t\tvar outVal = '';\n\t\t\t\t\t\n\t\t\t\t\t//Parse the object components\n\t\t\t\t\tvar c_len = components.length;\n\t\t\t\t\tfor (var i=0;i<c_len;++i) {\n\n\t\t\t\t\t\tif( components[i].length > 0 ) {\n\n\t\t\t\t\t\t\tvar newObj = useObj[components[i]];\n\t\t\t\t\t\t\tuseObj = newObj;\n\t\t\t\t\t\t\tif(useObj === null || useObj === undefined) break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//As long as we have an object to use then set the out\n\t\t\t\t\tif(useObj !== null && useObj !== undefined) outVal = useObj;\n\n\t\t\t\t\treturn(outVal);\n\t\t\t\t}) : src;\n\t\t\t});\n\t\t\t\n\t\t\tout = _tokenizer.parse(val).join('');\n\t\t} else {\n\t\t\tout = val;\n\t\t}\n\n\t\treturn(out);\n\t},\n\t\n\t//Tokenizer\n\t'_tokenizer':function( tokenizers, doBuild ){\n\n\t\tif( !(this instanceof json2html._tokenizer ) )\n\t\t\treturn new json2html._tokenizer( tokenizers, doBuild );\n\t\t\t\n\t\tthis.tokenizers = tokenizers.splice ? tokenizers : [tokenizers];\n\t\tif( doBuild )\n\t\t\tthis.doBuild = doBuild;\n\n\t\tthis.parse = function( src ){\n\t\t\tthis.src = src;\n\t\t\tthis.ended = false;\n\t\t\tthis.tokens = [ ];\n\t\t\tdo {\n\t\t\t\tthis.next();\n\t\t\t} while( !this.ended );\n\t\t\treturn this.tokens;\n\t\t};\n\t\t\n\t\tthis.build = function( src, real ){\n\t\t\tif( src )\n\t\t\t\tthis.tokens.push(\n\t\t\t\t\t!this.doBuild ? src :\n\t\t\t\t\tthis.doBuild(src,real,this.tkn)\n\t\t\t\t);\t\n\t\t};\n\n\t\tthis.next = function(){\n\t\t\tvar self = this,\n\t\t\t\tplain;\n\t\t\t\t\n\t\t\tself.findMin();\n\t\t\tplain = self.src.slice(0, self.min);\n\t\t\t\n\t\t\tself.build( plain, false );\n\t\t\t\t\n\t\t\tself.src = self.src.slice(self.min).replace(self.tkn,function( all ){\n\t\t\t\tself.build(all, true);\n\t\t\t\treturn '';\n\t\t\t});\n\t\t\t\n\t\t\tif( !self.src )\n\t\t\t\tself.ended = true;\n\t\t};\n\n\t\tthis.findMin = function(){\n\t\t\tvar self = this, i=0, tkn, idx;\n\t\t\tself.min = -1;\n\t\t\tself.tkn = '';\n\t\t\t\n\t\t\twhile(( tkn = self.tokenizers[i++]) !== undefined ){\n\t\t\t\tidx = self.src[tkn.test?'search':'indexOf'](tkn);\n\t\t\t\tif( idx != -1 && (self.min == -1 || idx < self.min )){\n\t\t\t\t\tself.tkn = tkn;\n\t\t\t\t\tself.min = idx;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( self.min == -1 )\n\t\t\t\tself.min = self.src.length;\n\t\t};\n\t}\n};\n","var currentArchive;\n\n// Initial data gets for sidebar ===================================================================\n\nfunction refreshSideBar() {\n\t// hide edit buttons\n\t$('#xmlEditBtns').hide();\n\t// empty working, pending, and problems views\n\t$('#workingArchives').empty();\n\t$('#pendingArchives').empty();\n\t$('#problemsArchives').empty();\n\t// empty edit view\n\t$('#xmlEdit').empty();\n\t// empty view view\n\t$('#top').empty();\n\t// empty files in archive view\n\t$('#archiveFiles').empty();\n\n\t// call API get function getOldestArchive to get oldest archive in data dir\n\tgetOldestArchive().done(function(res) {\n\t\t$('#oldestArchive').text(res);\n\t});\n\n\t// call API get function getArchives to get archives in working, pending, and problems dirs\n\tgetArchives().done(function(res) {\n\t\t//display in sidebar\n\t\tdisplayArchives(res);\n\t});\n}\n\nrefreshSideBar();\n\n// JQUERY event watchers ===========================================================================\n\n$(document).ready(function() {\n\n\t// Load button click (oldest archive)\n\t$('#loadOldestArchive').click(function() {\n\t\t// call API get function getOneArchive(archive, status) to get data about archive \n\t\tgetOneArchive('', 'oldest').done(function(res) {\n\t\t\tcurrentArchive = res.name;\n\t\t\tvar pdfFile = parseArchiveFiles(res);\n\n\t\t\t// call API get function getJsonFromXml to get the json data from current archive\n\t\t\tgetJsonFromXml(currentArchive).done(function(res) {\n\t\t\t\t// use json2html to display json \n\t\t\t\tvisualize(res.json);\n\t\t\t\t// call map function that maps xml data to the edit form's fields\n\t\t\t\tvar map = mapFunc(res.json, res.readyUrl, pdfFile);\n\t\t\t\t// prefill the form\n\t\t\t\tpreFillForm(res.json, map).done(function(res) {\n\t\t\t\t\tpostFormData(currentArchive, 'W');\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\trefreshSideBar();\n\t}); \n\n\t// submit for batch upload button click\n\t$('#submitToBatch').click(function() {\n\t\t// move to ready dir\n\t\tpostFormData(currentArchive, 'P').done(function(res) {\n\t\t\trefreshSideBar();\n\t\t\tconsole.log(res);\n\t\t});\n\t\t\n\t});\n\n\t// move to problems button click\n\t$('#moveToProblems').click(function() {\n\t\t// move to problems dir\n\t\tpostFormData(currentArchive, 'L').done(function(res) {\n\t\t\trefreshSideBar();\n\t\t\tconsole.log(res);\n\t\t});\n\t});\n});\n\n// since these elements are created dynamically create event watchers that will attach to these \n$(document).on('click', '.getme', function(event) {\n\tvar status = event.target.attributes.itemtype.textContent;\n\tvar archive = event.target.text;\n\n\tgetOneArchive(archive, status).done(function(res) {\n\t\tcurrentArchive = res.name;\n\t\tvar pdfFile = parseArchiveFiles(res);\n\n\t\t// call API get function getJsonFromXml to get the json data from current archive\n\t\tgetJsonFromXml(currentArchive).done(function(res) {\n\t\t\t// use json2html to display json \n\t\t\tvisualize(res);\n\t\t\t// call map function that maps xml data to the edit form's fields\n\t\t\tvar map = mapFunc(res.json, res.readyUrl, pdfFile);\n\t\t\t// prefill the form\n\t\t\tpreFillForm(res, map);\n\t\t});\n\t});\n\n});\n\n// Display Functions ===============================================================================\n\n// parse archive folder contents displaying to DOM if not xml and returning the pdf file\nfunction parseArchiveFiles(data) {\n\tvar pdfFile;\n\t// loop through array of files in archive\n\tfor (var i=2; i<data.contents.length; i++) {\n\t\tvar file = data.contents[i];\n\t\tvar ext = file.substr(file.length - 3, file.length);\n\n\t\t// display files that are not xml\n\t\tif (ext !== 'xml') {\n\t\t\t$('#archiveFiles').html('<a target=\"_blank\" href=\"' + data.archiveUrl + file + '\">' + file + '</a>');\n\t\t\tif (ext === 'pdf') {\n\t\t\t\tpdfFile = file;\n\t\t\t}\n\t\t}\n\t}\n\treturn pdfFile;\n}\n\n// prefills the xml edit form with data from xmlData using map.js as a map\nfunction preFillForm(xmlData, map) {\n\tvar dfd = $.Deferred();\n\n\t$('#xmlEdit').empty();\n\n\tfor (var i in map) {\n\t\t// create basic html, and append to form\n\t\tvar data = '<div class=\"form-group\">' +\n\t\t\t\t\t\t'<label for=\"' + map[i].id + '\">' + map[i].name + '</label>' +\n\t\t\t\t\t'</div>';\n\t\t$('#xmlEdit').append(data);\n\n\t\t// if type is test-long create textarea, else create input\n\t\tif (map[i].type === 'text-long') {\n\t\t\t//append textarea afer label\n\t\t\t$('label:last').after('<textarea class=\"form-control\" id=\"' + map[i].id + '\" name=\"' + map[i].id + '\"></textarea>');\n\t\t\t//add value to <textarea>\n\t\t\t$('#' + map[i].id).val(map[i].data);\n\t\t\t//calculate how many rows based in scrollHeight\n\t\t\tvar rows = calcRows($('#' + map[i].id)[0].scrollHeight);\n\t\t\t// change # of rows\n\t\t\t$('#' + map[i].id).attr('rows', rows);\n\t\t} else {\n\t\t\t// append <input> after label\n\t\t\t$('label:last').after('<input class=\"form-control\" id=\"' + map[i].id + '\" name=\"' + map[i].id + '\">');\n\t\t\t//add value and type to input\n\t\t\t$('#' + map[i].id)\n\t\t\t\t.attr('type', map[i].type)\n\t\t\t\t.val(map[i].data);\n\t\t}\n\t}\n\tdfd.resolve();\n\t// show submit and move buttons\n\t$('#xmlEditBtns').show();\n\treturn dfd.promise();\n}\n\n// append archive files in working, pending, and problems to sidebar\nfunction displayArchives(archives) {\n\n\t// update to parse data from database and refer to insert_id ?????????????????????????????????????????\n\t\n\t// for (var item in archives) {\n\t// \tfor (var i = 0; i < archives[item].length; i++) {\n\t// \t\tvar data = '<a href=\"#\" class=\"getme\" itemtype=\"' + item + '\">' + archives[item][i] + '</a><br>';\n\t// \t\t$('#' + item + 'Archives').append(data);\n\t// \t}\n\t// }\n}\n\n// Helper Functions ================================================================================\n\n// calculate the number of rows the textareas should be to show all text\nfunction calcRows(scrollHeight) {\n\treturn Math.round(scrollHeight/20) - 1;\n}\n\n// remove '@' and 'DISS_' \nfunction stripChars(str) {\n\tvar mapObj = {\n\t\t'@attributes': 'attributes',\n\t\t'DISS_': ''\n\t};\n\n\tstr = str.replace(/@attributes|DISS_/g, function(matched) {\n\t\treturn mapObj[matched];\n\t});\n\n\treturn str;\n}\n\n\n// API CALLS =======================================================================================\n\n// get oldest archive from ftp directory\nfunction getOldestArchive() {\n\tvar dfd = $.Deferred();\n\n\t$.ajax( {\n\t\turl: 'modules/archive/archive.php',\n\t\ttype: 'GET',\n\t\tdata: {'action': 'getOldestArchive'},\n\t\tsuccess: function(res, status) {\n\t\t\tdfd.resolve(res);\n\t\t},\n\t\terror: function(xhr, desc, err) {\n\t            console.log(xhr);\n\t            console.log(\"Details: \" + desc + \"\\nError: \" + err);\n\t    }\n\t});\n\n\treturn dfd.promise();\n}\n\n// get archive's dir names in working, pending, and problems dirs\nfunction getArchives() {\n\tvar dfd = $.Deferred();\n\n\t$.ajax( {\n\t\turl: 'modules/archive/archive.php',\n\t\ttype: 'GET',\n\t\tdata: {'action': 'getArchives'},\n\t\tsuccess: function(res, status) {\n\t\t\tdfd.resolve(JSON.parse(res));\n\t\t},\n\t\terror: function(xhr, desc, err) {\n\t            console.log(xhr);\n\t            console.log(\"Details: \" + desc + \"\\nError: \" + err);\n\t    }\n\t});\n\n\treturn dfd.promise();\n}\n\n// get one archive's properties\nfunction getOneArchive(archive, status) {\n\tvar dfd = $.Deferred();\n\n\t$.ajax( {\n\t\turl: 'modules/archive/archive.php',\n\t\ttype: 'GET',\n\t\tdatatype: 'JSON',\n\t\tdata: {\n\t\t\t'action': 'getOneArchive',\n\t\t\t'status': status,\n\t\t\t'archive': archive\n\t\t},\n\t\tsuccess: function(res, status) {\n\t\t\tdfd.resolve(JSON.parse(res));\n\t\t},\n\t\terror: function(xhr, desc, err) {\n            console.log(xhr);\n            console.log(\"Details: \" + desc + \"\\nError: \" + err);\n        }\n\t});\n\n\treturn dfd.promise();\n}\n\n// get contents of XML file in json\nfunction getJsonFromXml(archive) {\n\tvar dfd = $.Deferred();\n\n\t$.ajax({\n\t\turl: 'modules/xml/xml.php',\n\t\ttype: 'GET',\n\t\tdata: {\n\t\t\t'action': 'getJsonFromXml',\n\t\t\t'archive': archive\n\t\t},\n\t\tsuccess: function(res, status) {\n\t\t\tdfd.resolve(JSON.parse(stripChars(res)));\n\t\t},\n\t\terror: function(xhr, desc, err) {\n            console.log(xhr);\n            console.log(\"Details: \" + desc + \"\\nError: \" + err);\n\t\t}\n\t});\n\n\treturn dfd.promise();\n}\n\n// move archive to pending dir\nfunction postFormData(archive, status) {\n\n\tvar dfd = $.Deferred();\n\n\t$.ajax( {\n\t\turl: 'modules/archive/archive.php',\n\t\ttype: 'POST',\n\t\tdata: {\n\t\t\t'action': 'postFormData',\n\t\t\t'archive': archive,\n\t\t\t'status': status,\n\t\t\t'data': $('#xmlEdit').serialize(),  \n\t\t},\n\t\tsuccess: function(res, status) {\n\t\t\tconsole.log(JSON.parse(res));\n\t\t\tdfd.resolve(res);\n\t\t},\n\t\terror: function(xhr, desc, err) {\n            console.log(xhr);\n            console.log(\"Details: \" + desc + \"\\nError: \" + err);\n        }\n\t});\n\n\treturn dfd.promise();\n}\n\n\n\n\n\n\n\n\n","function mapFunc(xmlData, readyUrl, pdfFile) {\n\treturn [\n\t\t{\n\t\t\t\"name\": \"Title\",\n\t\t\t\"id\": \"title\",\n\t\t\t\"data\": xmlData.description.title.toTitleCase(),\n\t\t\t\"type\": \"text-long\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Full Text Url\",\n\t\t\t\"id\": \"fulltext_url\",\n\t\t\t\"data\": readyUrl + pdfFile,\n\t\t\t\"type\": \"url\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Keywords\",\n\t\t\t\"id\": \"keywords\",\n\t\t\t\"data\": xmlData.description.categorization.keyword,\n\t\t\t\"type\": \"text-long\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Abstract\",\n\t\t\t\"id\": \"abstract\",\n\t\t\t\"data\": concatParas(xmlData.content.abstract.para),\n\t\t\t\"type\": \"text-long\",\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 FName\",\n\t\t\t\"id\": \"author1_fname\",\n\t\t\t\"data\": xmlData.authorship.author.name.fname,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 MName\",\n\t\t\t\"id\": \"author1_mname\",\n\t\t\t\"data\": (xmlData.authorship.author.name.middle[0]) ? xmlData.authorship.author.name.middle : undefined,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 LName\",\n\t\t\t\"id\": \"author1_lname\",\n\t\t\t\"data\": xmlData.authorship.author.name.surname,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 Suffix\",\n\t\t\t\"id\": \"author1_suffix\",\n\t\t\t\"data\": (xmlData.authorship.author.name.suffix[0]) ? xmlData.authorship.author.name.suffix : undefined,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 Email\",\n\t\t\t\"id\": \"author1_email\",\n\t\t\t\"data\": xmlData.authorship.author.contact[1].email || xmlData.authorship.author.contact[0].email,\n\t\t\t\"type\": \"email\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 Institution\",\n\t\t\t\"id\": \"author1_institution\",\n\t\t\t\"data\": xmlData.description.institution.inst_name,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor1\",\n\t\t\t\"id\": \"advisor1\",\n\t\t\t\"data\": (xmlData.description.cmte_member[0]) ? xmlData.description.cmte_member[0].name.surname + ', ' + xmlData.description.cmte_member[0].name.fname : undefined,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor2\",\n\t\t\t\"id\": \"advisor2\",\n\t\t\t\"data\": (xmlData.description.cmte_member[1]) ? xmlData.description.cmte_member[1].name.surname + ', ' + xmlData.description.cmte_member[1].name.fname : undefined,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor3\",\n\t\t\t\"id\": \"advisor3\",\n\t\t\t\"data\": (xmlData.description.cmte_member[2]) ? xmlData.description.cmte_member[2].name.surname + ', ' + xmlData.description.cmte_member[2].name.fname : undefined,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor4\",\n\t\t\t\"id\": \"advisor4\",\n\t\t\t\"data\": (xmlData.description.cmte_member[3]) ? xmlData.description.cmte_member[3].name.surname + ', ' + xmlData.description.cmte_member[3].name.fname : undefined,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor5\",\n\t\t\t\"id\": \"advisor5\",\n\t\t\t\"data\": (xmlData.description.cmte_member[4]) ? xmlData.description.cmte_member[4].name.surname + ', ' + xmlData.description.cmte_member[4].name.fname : undefined,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Disciplines\",\n\t\t\t\"id\": \"disciplines\",\n\t\t\t\"data\": xmlData.description.institution.inst_contact,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Comments\",\n\t\t\t\"id\": \"comments\",\n\t\t\t\"data\": \"\",\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Degree Name\",\n\t\t\t\"id\": \"degree_name\",\n\t\t\t\"data\": xmlData.description.degree.replace(/\\./g, ''),\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Department\",\n\t\t\t\"id\": \"department\",\n\t\t\t\"data\": xmlData.description.institution.inst_contact,\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Document Type\",\n\t\t\t\"id\": \"document_type\",\n\t\t\t\"data\": (xmlData.description.attributes.type === 'doctoral') ? 'Dissertation' : 'Thesis',\n\t\t\t\"type\": \"text\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Embargo Date\",\n\t\t\t\"id\": \"embargo_date\",\n\t\t\t\"data\": embargoDate(xmlData.attributes.embargo_code),\n\t\t\t\"type\": \"date\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Publication Date\",\n\t\t\t\"id\": \"publication_date\",\n\t\t\t\"data\": xmlData.description.dates.comp_date + '-01-01',\n\t\t\t\"type\": \"date\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Season\",\n\t\t\t\"id\": \"season\",\n\t\t\t\"data\": \"Spring\",\n\t\t\t\"type\": \"text\"\n\t\t}\n\t];\n}\n\nString.prototype.toTitleCase = function() {\n  var i, j, str, lowers, uppers;\n  str = this.replace(/([^\\W_]+[^\\s-]*) */g, function(txt) {\n    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n  });\n\n  // Certain minor words should be left lowercase unless \n  // they are the first or last words in the string\n  lowers = ['A', 'An', 'The', 'And', 'But', 'Or', 'For', 'Nor', 'As', 'At', \n  'By', 'For', 'From', 'In', 'Into', 'Near', 'Of', 'On', 'Onto', 'To', 'With'];\n  for (i = 0, j = lowers.length; i < j; i++)\n    str = str.replace(new RegExp('\\\\s' + lowers[i] + '\\\\s', 'g'), \n      function(txt) {\n        return txt.toLowerCase();\n      });\n\n  // Certain words such as initialisms or acronyms should be left uppercase\n  uppers = ['Id', 'Tv'];\n  for (i = 0, j = uppers.length; i < j; i++)\n    str = str.replace(new RegExp('\\\\b' + uppers[i] + '\\\\b', 'g'), \n      uppers[i].toUpperCase());\n\n  return str;\n};\n\nvar embargoDate = function(code) {\n\t// get todays date and format for HTML5 date format ie yyyy-mm-dd\n\tvar now = new Date();\n\tvar day = (\"0\" + now.getDate()).slice(-2);\n\tvar month = (\"0\" + (now.getMonth() + 1)).slice(-2);\n\tvar today = now.getFullYear()+\"-\"+(month)+\"-\"+(day);\n\n\tif (code === '0') {\n\t\treturn today;\n\t}\n\n};\n\n// concat the paragraphs under abstract adding <p></p> tags if multiple paragraphs\nvar concatParas = function(paras) {\n\tif (typeof(paras) === 'object') {\n\t\tvar str = '';\n\t\tfor (var i = 0; i < paras.length; i++) {\n\t\t\tstr += '<p>' + paras[i] + '</p>';\n\t\t}\n\t\treturn str;\n\t} else {\n\t\treturn paras;\n\t}\n}\n\n"]}