{"version":3,"sources":["index-json2html.js","jquery-json2html.js","json2html.js","main.js","mapDb.js","mapJson.js"],"names":["visualize","json","$","html","json2html","convert","transforms","object","regEvents","getValue","obj","type","children","transform","name","show","undefined","len","length","j","prop","value","click","parent","this","hasClass","removeClass","addClass","tag","class","classes","push","join","fn","_options","options","append","replace","prepend","eventData","extend","events","each","result","dom","document","createElement","i","event","find","id","removeAttr","on","data","e","action","call","replaceWith","jQuery","out","_extend","JSON","parse","_transform","obj1","obj2","obj3","attrname","_append","concat","_isArray","Object","prototype","toString","elements","_apply","index","element","t_len","t","_getValue","key","temp","isEvent","substring","toLowerCase","_guid","val","S4","Math","random","_tokenizer","src","real","re","all","components","split","useObj","outVal","c_len","newObj","tokenizers","doBuild","splice","ended","tokens","next","build","tkn","plain","self","findMin","slice","min","idx","test","Archive","console","log","status","contents","archiveUrl","readyUrl","getPdf","substr","pdf","stripChars","db","refreshSideBar","getOldestArchive","done","res","text","getArchives","displayArchives","displayArchiveFiles","archive","file","ext","preFillForm","map","dfd","Deferred","empty","after","rows","calcRows","scrollHeight","attr","readonly","resolve","promise","archives","workingHtml","pendingHtml","problemHtml","workflow_status","submission_id","sequence_num","identikey","round","str","mapObj","@attributes","DISS_","matched","ajax","url","success","error","xhr","desc","err","getOneArchive","datatype","subId","postFormData","serialize","currentArchive","ready","mapJson","target","attributes","textContent","mapDb","title","keywords","abstract","author1_fname","author1_mname","author1_lname","author1_suffix","author1_email","author1_institution","advisor1","advisor2","advisor3","advisor4","advisor5","disciplines","comments","degree_name","department","document_type","embargo_date","publication_date","season","description","toTitleCase","categorization","keyword","concatParas","content","para","authorship","author","fname","middle","surname","suffix","contact","email","institution","inst_name","cmte_member","inst_contact","degree","embargoDate","embargo_code","dates","comp_date","String","lowers","uppers","txt","charAt","toUpperCase","RegExp","code","now","Date","day","getDate","month","getMonth","today","getFullYear","paras"],"mappings":"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","file":"../bundle.min.js","sourcesContent":["//Copyright (c) 2013 Crystalline Technologies\n//\n//  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'),\n//  to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, \n//  and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//  THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, \n//  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar transforms = {\n\t'object':{'tag':'div','class':'package ${show} ${type}','children':[\n\t\t{'tag':'div','class':'header','children':[\n\t\t\t{'tag':'div','class':function(obj){\n\n\t\t\t\tvar classes = [\"arrow\"];\n\n\t\t\t\tif( getValue(obj.value) !== undefined ) classes.push(\"hide\");\n\t\t\t\t\n\t\t\t\treturn(classes.join(' '));\n\t\t\t}},\n\t\t\t{'tag':'span','class':'name','html':'${name}'},\n\t\t\t{'tag':'span','class':'value','html':function(obj) {\n\t\t\t\tvar value = getValue(obj.value);\n\t\t\t\tif( value !== undefined ) return(\" : \" + value);\n\t\t\t\telse return('');\n\t\t\t}},\n\t\t\t{'tag':'span','class':'type','html':'${type}'}\n\t\t]},\n\t\t{'tag':'div','class':'children','children':function(obj){return(children(obj.value));}}\n\t]}\n};\n\nfunction visualize(json) {\n\t\n\t$('#top').html('');\n\n\t$('#top').json2html(convert('json',json,'open'),transforms.object);\n\n\tregEvents();\t\t\n}\n\nfunction getValue(obj) {\n\tvar type = $.type(obj);\n\n\t//Determine if this object has children\n\tswitch(type) {\n\t\tcase 'array':\n\t\tcase 'object':\n\t\t\treturn(undefined);\n\t\tbreak;\n\n\t\tcase 'function':\n\t\t\t//none\n\t\t\treturn('function');\n\t\tbreak;\n\n\t\tcase 'string':\n\t\t\treturn(\"'\" + obj + \"'\");\n\t\tbreak;\n\n\t\tdefault:\n\t\t\treturn(obj);\n\t\tbreak;\n\t}\n}\n\n//Transform the children\nfunction children(obj){\n\tvar type = $.type(obj);\n\n\t//Determine if this object has children\n\tswitch(type) {\n\t\tcase 'array':\n\t\tcase 'object':\n\t\t\treturn(json2html.transform(obj,transforms.object));\n\t\tbreak;\n\n\t\tdefault:\n\t\t\t//This must be a litteral\n\t\tbreak;\n\t}\n}\n\nfunction convert(name,obj,show) {\n\t\n\tvar type = $.type(obj);\n\n\tif(show === undefined) show = 'closed';\n\t\n\tvar children = [];\n\n\t//Determine the type of this object\n\tswitch(type) {\n\t\tcase 'array':\n\t\t\t//Transform array\n\t\t\t//Itterrate through the array and add it to the elements array\n\t\t\tvar len=obj.length;\n\t\t\tfor(var j=0;j<len;++j){\t\n\t\t\t\t//Concat the return elements from this objects tranformation\n\t\t\t\tchildren[j] = convert(j,obj[j]);\n\t\t\t}\n\t\tbreak;\n\n\t\tcase 'object':\n\t\t\t//Transform Object\n\t\t\tvar j = 0;\n\t\t\tfor(var prop in obj) {\n\t\t\t\tchildren[j] = convert(prop,obj[prop]);\n\t\t\t\tj++;\n\t\t\t}\t\n\t\tbreak;\n\n\t\tdefault:\n\t\t\t//This must be a litteral (or function)\n\t\t\tchildren = obj;\n\t\tbreak;\n\t}\n\n\treturn( {'name':name,'value':children,'type':type,'show':show} );\n\t\n}\n\nfunction regEvents() {\n\n\t$('.header').click(function(){\n\t\tvar parent = $(this).parent();\n\n\t\tif(parent.hasClass('closed')) {\n\t\t\tparent.removeClass('closed');\n\t\t\tparent.addClass('open');\n\t\t} else {\n\t\t\tparent.removeClass('open');\n\t\t\tparent.addClass('closed');\n\t\t}\t\t\n\t});\n}","//Copyright (c) 2013 Crystalline Technologies\n//\n//  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'),\n//  to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, \n//  and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//  THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, \n//  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n(function($){\t\n\n\t//Main method\n\t$.fn.json2html = function(json, transform, _options){\t\n\t\t\n\t\t//Make sure we have the json2html base loaded\n\t\tif(typeof json2html === 'undefined') return(undefined);\n\n\t\t//Default Options\n\t\tvar options = {\n\t\t\t'append':true,\n\t\t\t'replace':false,\n\t\t\t'prepend':false,\n\t\t\t'eventData':{}\n\t\t};\n\n\t\t//Extend the options (with defaults)\n\t\tif( _options !== undefined ) $.extend(options, _options);\n\n\t\t//Insure that we have the events turned (Required)\n\t\toptions.events = true;\n\t\t\n\t\t//Make sure to take care of any chaining\n\t\treturn this.each(function(){ \n\t\t\t\n\t\t\t//let json2html core do it's magic\n\t\t\tvar result = json2html.transform(json, transform, options);\n\t\t\t\n\t\t\t//Attach the html(string) result to the DOM\n\t\t\tvar dom = $(document.createElement('i')).html(result.html);\n\n\t\t\t//Determine if we have events\n\t\t\tfor(var i = 0; i < result.events.length; i++) {\n\t\t\t\t\n\t\t\t\tvar event = result.events[i];\n\n\t\t\t\t//find the associated DOM object with this event\n\t\t\t\tvar obj = $(dom).find(\"[json2html-event-id-\"+event.type+\"='\" + event.id + \"']\");\n\n\t\t\t\t//Check to see if we found this element or not\n\t\t\t\tif(obj.length === 0) throw 'jquery.json2html was unable to attach event ' + event.id + ' to DOM';\n\t\t\t\t\n\t\t\t\t//remove the attribute\n\t\t\t\t$(obj).removeAttr('json2html-event-id-'+event.type);\n\n\t\t\t\t//attach the event\n\t\t\t\t$(obj).on(event.type,event.data,function(e){\n\t\t\t\t\t//attach the jquery event\n\t\t\t\t\te.data.event = e;\n\n\t\t\t\t\t//call the appropriate method\n\t\t\t\t\te.data.action.call($(this),e.data);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Append it to the appropriate element\n\t\t\tif (options.replace) $.fn.replaceWith.call($(this),$(dom).children());\n\t\t\telse if (options.prepend) $.fn.prepend.call($(this),$(dom).children());\n\t\t\telse $.fn.append.call($(this),$(dom).children());\n\t\t});\n\t};\n})(jQuery);\n","//Copyright (c) 2013 Crystalline Technologies\n//\n//  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'),\n//  to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, \n//  and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//  THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, \n//  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar json2html = {\n\t\n\t/* ---------------------------------------- Public Methods ------------------------------------------------ */\n\t'transform': function(json,transform,_options) {\n\t\t\n\t\t//create the default output\n\t\tvar out = {'events':[],'html':''};\n\t\t\n\t\t//default options (by default we don't allow events)\n\t\tvar options = {\n\t\t\t'events':false\n\t\t};\n\t\t\n\t\t//extend the options\n\t\toptions = json2html._extend(options,_options);\n\n\t\t//Make sure we have a transform & json object\n\t\tif( transform !== undefined || json !== undefined ) {\n\n\t\t\t//Normalize strings to JSON objects if necessary\n\t\t\tvar obj = typeof json === 'string' ? JSON.parse(json) : json;\n\t\t\t\n\t\t\t//Transform the object (using the options)\n\t\t\tout = json2html._transform(obj, transform, options);\n\t\t}\n\t\t\n\t\t//determine if we need the events\n\t\t// otherwise return just the html string\n\t\tif(options.events) return(out);\n\t\t\telse return( out.html );\n\t},\n\t\n\t/* ---------------------------------------- Private Methods ------------------------------------------------ */\n\t\n\t//Extend options\n\t'_extend':function(obj1,obj2){\n\t\tvar obj3 = {};\n\t\tfor (var attrname in obj1) { obj3[attrname] = obj1[attrname]; }\n\t\tfor (var attrname in obj2) { obj3[attrname] = obj2[attrname]; }\n\t\treturn obj3;\n\t},\n\t\n\t//Append results\n\t'_append':function(obj1,obj2) {\n\t\tvar out = {'html':'','event':[]};\n\t\tif(typeof obj1 !== 'undefined' && typeof obj2 !== 'undefined') {\n\t\t\tout.html = obj1.html + obj2.html;\n\n\t\t\tout.events = obj1.events.concat(obj2.events);\n\t\t}\n\n\t\treturn(out);\n\t},\n\n\t//isArray (fix for IE prior to 9)\n\t'_isArray':function(obj) {\n\t\treturn Object.prototype.toString.call(obj) === '[object Array]';\n\t},\n\t\n\t//Transform object\n\t'_transform':function(json, transform, options) {\n\t\t\n\t\tvar elements = {'events':[],'html':''};\n\t\t\n\t\t//Determine the type of this object\n\t\tif(json2html._isArray(json)) {\n\t\t\t\n\t\t\t//Itterrate through the array and add it to the elements array\n\t\t\tvar len=json.length;\n\t\t\tfor(var j=0;j<len;++j) {\t\n\t\t\t\t//Apply the transform to this object and append it to the results\n\t\t\t\telements = json2html._append(elements,json2html._apply(json[j], transform, j, options));\n\t\t\t}\n\n\t\t} else if(typeof json === 'object') {\n\n\t\t\t//Apply the transform to this object and append it to the results\n\t\t\telements = json2html._append(elements,json2html._apply(json, transform, undefined, options));\n\t\t}\n\n\t\t//Return the resulting elements\n\t\treturn(elements);\t\t\n\t},\n\n\t//Apply the transform at the second level\n\t'_apply':function(obj, transform, index, options) {\n\n\t\tvar element = {'events':[],'html':''};\n\t\t\n\t\t//Itterate through the transform and create html as needed\n\t\tif(json2html._isArray(transform)) {\n\t\t\t\n\t\t\tvar t_len = transform.length;\n\t\t\tfor(var t=0; t < t_len; ++t) {\n\t\t\t\t//transform the object and append it to the output\n\t\t\t\telement = json2html._append(element,json2html._apply(obj, transform[t], index, options));\n\t\t\t}\n\n\t\t} else if(typeof transform === 'object') {\n\n\t\t\t//Get the tag element of this transform\n\t\t\tif( transform.tag !== undefined ) {\n\n\t\t\t\tvar tag = json2html._getValue(obj,transform,'tag',index);\n\n\t\t\t\t//Create a new element\n\t\t\t\telement.html += '<' + tag;\n\n\t\t\t\t//Create a new object for the children\n\t\t\t\tvar children = {'events':[],'html':''};\n\t\t\t\t\n\t\t\t\t//innerHTML\n\t\t\t\tvar html;\n\n\t\t\t\t//Look into the properties of this transform\n\t\t\t\tfor (var key in transform) {\n\n\t\t\t\t\tswitch(key) {\n\t\t\t\t\t\tcase 'tag':\n\t\t\t\t\t\t\t//Do nothing as we have already created the element from the tag\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'children':\n\t\t\t\t\t\t\t//Add the children\n\t\t\t\t\t\t\tif(json2html._isArray(transform.children)) {\n\n\t\t\t\t\t\t\t\t//Apply the transform to the children\n\t\t\t\t\t\t\t\tchildren = json2html._append(children,json2html._apply(obj, transform.children, index, options));\n\t\t\t\t\t\t\t} else if(typeof transform.children === 'function') {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//Get the result from the function\n\t\t\t\t\t\t\t\tvar temp = transform.children.call(obj, obj, index);\n\n\t\t\t\t\t\t\t\t//Make sure we have an object result with the props\n\t\t\t\t\t\t\t\t// html (string), events (array)\n\t\t\t\t\t\t\t\t// OR a string (then just append it to the children\n\t\t\t\t\t\t\t\tif(typeof temp === 'object') {\n\t\t\t\t\t\t\t\t\t//make sure this object is a valid json2html response object\n\t\t\t\t\t\t\t\t\tif(temp.html !== undefined && temp.events !== undefined) children = json2html._append(children,temp);\n\t\t\t\t\t\t\t\t} else if(typeof temp === 'string') {\n\n\t\t\t\t\t\t\t\t\t//append the result directly to the html of the children\n\t\t\t\t\t\t\t\t\tchildren.html += temp;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'html':\n\t\t\t\t\t\t\t//Create the html attribute for this element\n\t\t\t\t\t\t\thtml = json2html._getValue(obj,transform,'html',index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t//Add the property as a attribute if it's not a key one\n\t\t\t\t\t\t\tvar isEvent = false;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//Check if the first two characters are 'on' then this is an event\n\t\t\t\t\t\t\tif( key.length > 2 )\n\t\t\t\t\t\t\t\tif(key.substring(0,2).toLowerCase() == 'on') {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t//Determine if we should add events\n\t\t\t\t\t\t\t\t\tif(options.events) {\n\n\t\t\t\t\t\t\t\t\t\t//if so then setup the event data\n\t\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t'action':transform[key],\n\t\t\t\t\t\t\t\t\t\t\t'obj':obj,\n\t\t\t\t\t\t\t\t\t\t\t'data':options.eventData,\n\t\t\t\t\t\t\t\t\t\t\t'index':index\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t//create a new id for this event\n\t\t\t\t\t\t\t\t\t\tvar id = json2html._guid();\n\n\t\t\t\t\t\t\t\t\t\t//append the new event to this elements events\n\t\t\t\t\t\t\t\t\t\telement.events[element.events.length] = {'id':id,'type':key.substring(2),'data':data};\n\n\t\t\t\t\t\t\t\t\t\t//Insert temporary event property (json2html-event-id) into the element\n\t\t\t\t\t\t\t\t\t\telement.html += \" json2html-event-id-\"+key.substring(2)+\"='\" + id + \"'\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//this is an event\n\t\t\t\t\t\t\t\t\tisEvent = true;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//If this wasn't an event AND we actually have a value then add it as a property\n\t\t\t\t\t\t\tif( !isEvent){\n\t\t\t\t\t\t\t\t//Get the value\n\t\t\t\t\t\t\t\tvar val = json2html._getValue(obj, transform, key, index);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//Make sure we have a value\n                                if(val !== undefined) {\n                                    var out;\n                                    \n                                    //Determine the output type of this value (wrap with quotes)\n                                    if(typeof val === 'string') out = '\"' + val.replace(/\"/g, '&quot;') + '\"';\n                                    else out = val;\n                                    \n                                    //creat the name value pair\n\t\t\t\t\t\t\t\t    element.html += ' ' + key + '=' + out;\n                                }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//close the opening tag\n\t\t\t\telement.html += '>';\n\t\t\t\t\n\t\t\t\t//add the innerHTML (if we have any)\n\t\t\t\tif(html) element.html += html;\n\n\t\t\t\t//add the children (if we have any)\n\t\t\t\telement = json2html._append(element,children);\n\n\t\t\t\t//add the closing tag\n\t\t\t\telement.html += '</' + tag + '>';\n\t\t\t}\n\t\t}\n\t\t\n\t\t//Return the output object\n\t\treturn(element);\n\t},\n\n\t//Get a new GUID (used by events)\n\t'_guid':function() {\n\t\tvar S4 = function() {\n\t\t   return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n\t\t};\n\t\treturn (S4()+S4()+\"-\"+S4()+S4()+\"-\"+S4()+S4());\n\t},\n\n\t//Get the html value of the object\n\t'_getValue':function(obj, transform, key,index) {\n\t\t\n\t\tvar out = '';\n\t\t\n\t\tvar val = transform[key];\n\t\tvar type = typeof val;\n\t\t\n\t\tif (type === 'function') {\n\t\t\treturn(val.call(obj,obj,index));\n\t\t} else if (type === 'string') {\n\t\t\tvar _tokenizer = new json2html._tokenizer([\n\t\t\t\t/\\$\\{([^\\}\\{]+)\\}/\n\t\t\t],function( src, real, re ){\n\t\t\t\treturn real ? src.replace(re,function(all,name){\n\t\t\t\t\t\n\t\t\t\t\t//Split the string into it's seperate components\n\t\t\t\t\tvar components = name.split('.');\n\n\t\t\t\t\t//Set the object we use to query for this name to be the original object\n\t\t\t\t\tvar useObj = obj;\n\n\t\t\t\t\t//Output value\n\t\t\t\t\tvar outVal = '';\n\t\t\t\t\t\n\t\t\t\t\t//Parse the object components\n\t\t\t\t\tvar c_len = components.length;\n\t\t\t\t\tfor (var i=0;i<c_len;++i) {\n\n\t\t\t\t\t\tif( components[i].length > 0 ) {\n\n\t\t\t\t\t\t\tvar newObj = useObj[components[i]];\n\t\t\t\t\t\t\tuseObj = newObj;\n\t\t\t\t\t\t\tif(useObj === null || useObj === undefined) break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//As long as we have an object to use then set the out\n\t\t\t\t\tif(useObj !== null && useObj !== undefined) outVal = useObj;\n\n\t\t\t\t\treturn(outVal);\n\t\t\t\t}) : src;\n\t\t\t});\n\t\t\t\n\t\t\tout = _tokenizer.parse(val).join('');\n\t\t} else {\n\t\t\tout = val;\n\t\t}\n\n\t\treturn(out);\n\t},\n\t\n\t//Tokenizer\n\t'_tokenizer':function( tokenizers, doBuild ){\n\n\t\tif( !(this instanceof json2html._tokenizer ) )\n\t\t\treturn new json2html._tokenizer( tokenizers, doBuild );\n\t\t\t\n\t\tthis.tokenizers = tokenizers.splice ? tokenizers : [tokenizers];\n\t\tif( doBuild )\n\t\t\tthis.doBuild = doBuild;\n\n\t\tthis.parse = function( src ){\n\t\t\tthis.src = src;\n\t\t\tthis.ended = false;\n\t\t\tthis.tokens = [ ];\n\t\t\tdo {\n\t\t\t\tthis.next();\n\t\t\t} while( !this.ended );\n\t\t\treturn this.tokens;\n\t\t};\n\t\t\n\t\tthis.build = function( src, real ){\n\t\t\tif( src )\n\t\t\t\tthis.tokens.push(\n\t\t\t\t\t!this.doBuild ? src :\n\t\t\t\t\tthis.doBuild(src,real,this.tkn)\n\t\t\t\t);\t\n\t\t};\n\n\t\tthis.next = function(){\n\t\t\tvar self = this,\n\t\t\t\tplain;\n\t\t\t\t\n\t\t\tself.findMin();\n\t\t\tplain = self.src.slice(0, self.min);\n\t\t\t\n\t\t\tself.build( plain, false );\n\t\t\t\t\n\t\t\tself.src = self.src.slice(self.min).replace(self.tkn,function( all ){\n\t\t\t\tself.build(all, true);\n\t\t\t\treturn '';\n\t\t\t});\n\t\t\t\n\t\t\tif( !self.src )\n\t\t\t\tself.ended = true;\n\t\t};\n\n\t\tthis.findMin = function(){\n\t\t\tvar self = this, i=0, tkn, idx;\n\t\t\tself.min = -1;\n\t\t\tself.tkn = '';\n\t\t\t\n\t\t\twhile(( tkn = self.tokenizers[i++]) !== undefined ){\n\t\t\t\tidx = self.src[tkn.test?'search':'indexOf'](tkn);\n\t\t\t\tif( idx != -1 && (self.min == -1 || idx < self.min )){\n\t\t\t\t\tself.tkn = tkn;\n\t\t\t\t\tself.min = idx;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( self.min == -1 )\n\t\t\t\tself.min = self.src.length;\n\t\t};\n\t}\n};\n","var currentArchive;\n\n// object holding info about archive currently being edited\nfunction Archive(data) {\n\tconsole.log(data);\n\tthis.name = data.name;\n\tthis.status = data.status;\n\tthis.contents = data.contents;\n\tthis.archiveUrl = data.archiveUrl;\n\tthis.readyUrl = data.readyUrl;\n\tthis.getPdf = function() {\n\t\tfor (var i = 0; i < this.contents.length; i++) {\n\t\t\tif (this.contents[i].substr(-3) === 'pdf') {\n\t\t\t\treturn this.contents[i];\n\t\t\t}\n\t\t}\n\t};\n\tthis.pdf = this.getPdf();\n\tthis.json = JSON.parse(stripChars(data.json));\n\tthis.db = data.db;\n}\n\n\n// Initial data gets for sidebar ===================================================================\n\nfunction refreshSideBar() {\n\t// hide edit buttons\n\t// $('#xmlEditBtns').hide();\n\n\t// empty working, pending, and problems views\n\t// $('#W').empty();\n\t// $('#P').empty();\n\t// $('#L').empty();\n\n\t// call API get function getOldestArchive to get oldest archive in currentArchive dir\n\tgetOldestArchive().done(function(res) {\n\t\t$('#oldestArchive').text(res);\n\t});\n\n\t// call API get function getArchives to get archives in working, pending, and problems dirs\n\tgetArchives().done(function(res) {\n\t\t//display in sidebar\n\t\tdisplayArchives(res);\n\t});\n}\n\nrefreshSideBar();\n\n// JQUERY event watchers ===========================================================================\n\n$(document).ready(function() {\n\n\t// Load button click (oldest archive)\n\t$('#loadOldestArchive').click(function() {\n\t\t// call API get function getOneArchive(archive, id, status) to get data about archive \n\t\tgetOneArchive('', '', '').done(function(res) {\n\t\t\t// create currentArchive object from response\n\t\t\tcurrentArchive = new Archive(res);\n\n\t\t\t// use json2html to display json \n\t\t\tvisualize(currentArchive.json);\n\n\t\t\tdisplayArchiveFiles(currentArchive);\n\n\t\t\t// prefill the form using function mapJson\n\t\t\tpreFillForm(mapJson(currentArchive)).done(function(res) {\n\t\t\t\t// once form is filled post this to database and set the subId\n\t\t\t\tpostFormData(currentArchive).done(function(res) {\n\t\t\t\t\tcurrentArchive.subId = res.id;\n\t\t\t\t\trefreshSideBar();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}); \n\n\t// submit for batch upload button click\n\t$('#submitToBatch').click(function() {\n\t\t// submit updated data and mark Pending\n\t\tcurrentArchive.status = 'P';\n\t\tpostFormData(currentArchive).done(function(res) {\n\t\t\trefreshSideBar();\n\t\t\t// clearEditView();\n\t\t});\n\t\t\n\t});\n\n\t// move to problems button click\n\t$('#moveToProblems').click(function() {\n\t\t// submit updated data and mark problem\n\t\tcurrentArchive.status = 'L';\n\t\tpostFormData(currentArchive).done(function(res) {\n\t\t\trefreshSideBar();\n\t\t\t// clearEditView();\n\t\t});\n\t});\n});\n\n// click handlers for archive links in working, pending, and problems on sidebar\n// since these elements are created dynamically create event watchers that will attach to these \n$(document).on('click', '.getme', function(event) {\n\tvar subId = event.target.attributes.subId.textContent;\n\tvar archive = event.target.attributes.archive.textContent;\n\n\tgetOneArchive(archive, subId, '').done(function(res) {\n\n\t\tcurrentArchive = new Archive(res);\n\n\t\t// call map function that maps database data to the edit form's fields\n\t\tpreFillForm(mapDb(currentArchive));\n\n\t\t// use json2html to display json \n\t\tvisualize(currentArchive.json);\n\n\t\tdisplayArchiveFiles(currentArchive);\n\n\t});\n\n});\n\n// Display Functions ===============================================================================\n\n// parse archive folder contents displaying to DOM if not xml and returning the pdf file\nfunction displayArchiveFiles(archive) {\n\tvar html = '';\n\n\t// loop through array of files in archive\n\tfor (var i = 2; i <  archive.contents.length; i++) {\n\t\tvar file = archive.contents[i];\n\t\tvar ext = file.substr(-3);\n\n\t\t// display files that are not xml\n\t\tif (ext !== 'xml') {\n\t\t\thtml += '<a target=\"_blank\" href=\"' + archive.archiveUrl + file + '\">' + file + '</a><br>';\n\t\t}\n\t}\n\n\t$('#archiveFiles').html(html);\n}\n\n// prefills the xml edit form with data from xmlData using map.js as a map\nfunction preFillForm(map) {\n\tvar dfd = $.Deferred();\n\n\t$('#xmlEdit').empty();\n\n\tfor (var i in map) {\n\t\t// create basic html, and append to form\n\t\tvar data = '<div class=\"form-group\">' +\n\t\t\t\t\t\t'<label for=\"' + map[i].id + '\">' + map[i].name + '</label>' +\n\t\t\t\t\t'</div>';\n\t\t$('#xmlEdit').append(data);\n\n\t\t// if type is test-long create textarea, else create input\n\t\tif (map[i].type === 'text-long') {\n\t\t\t//append textarea afer label\n\t\t\t$('label:last').after('<textarea class=\"form-control\" id=\"' + map[i].id + '\" name=\"' + map[i].id + '\"></textarea>');\n\t\t\t//add value to <textarea>\n\t\t\t$('#' + map[i].id).val(map[i].data);\n\t\t\t//calculate how many rows based in scrollHeight\n\t\t\tvar rows = calcRows($('#' + map[i].id)[0].scrollHeight);\n\t\t\t// change # of rows\n\t\t\t$('#' + map[i].id).attr('rows', rows);\n\t\t} else {\n\t\t\t// append <input> after label\n\t\t\t$('label:last').after('<input class=\"form-control\" id=\"' + map[i].id + '\" name=\"' + map[i].id + '\">');\n\t\t\t//add value and type to input\n\t\t\t$('#' + map[i].id)\n\t\t\t\t.attr('type', map[i].type)\n\t\t\t\t.val(map[i].data)\n\t\t\t\t.attr('readonly', map[i].readonly);\n\t\t}\n\t}\n\tdfd.resolve();\n\t// show submit and move buttons\n\t$('#xmlEditBtns').show();\n\treturn dfd.promise();\n}\n\n// append archive files in working, pending, and problems to sidebar\nfunction displayArchives(archives) {\n\tvar workingHtml = '',\n\t\tpendingHtml = '',\n\t\tproblemHtml = '';\n\n\tfor (var i = 0; i < archives.length; i++) {\n\t\tswitch (archives[i].workflow_status) {\n\t\t\tcase 'W':\n\t\t\t\tworkingHtml += '<a href=\"#\" class=\"getme\" subId=\"' + archives[i].submission_id + '\" archive=\"' + archives[i].sequence_num + '\">' + archives[i].identikey + '-' + archives[i].sequence_num + '</a><br>';\n\t\t\t\tbreak;\n\t\t\tcase 'P':\n\t\t\t\tpendingHtml += '<a href=\"#\" class=\"getme\" subId=\"' + archives[i].submission_id + '\" archive=\"' + archives[i].sequence_num + '\">' + archives[i].identikey + '-' + archives[i].sequence_num + '</a><br>';\n\t\t\t\tbreak;\n\t\t\tcase 'L':\n\t\t\t\tproblemHtml += '<a href=\"#\" class=\"getme\" subId=\"' + archives[i].submission_id + '\" archive=\"' + archives[i].sequence_num + '\">' + archives[i].identikey + '-' + archives[i].sequence_num + '</a><br>';\n\t\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t$('#working').html(workingHtml);\n\t$('#pending').html(pendingHtml);\n\t$('#problem').html(problemHtml);\n}\n\n// Helper Functions ================================================================================\n\n// calculate the number of rows the textareas should be to show all text\nfunction calcRows(scrollHeight) {\n\treturn Math.round(scrollHeight/20) - 1;\n}\n\n// remove '@' and 'DISS_' \nfunction stripChars(str) {\n\tvar mapObj = {\n\t\t'@attributes': 'attributes',\n\t\t'DISS_': ''\n\t};\n\n\tstr = str.replace(/@attributes|DISS_/g, function(matched) {\n\t\treturn mapObj[matched];\n\t});\n\n\treturn str;\n}\n\n\n// API CALLS =======================================================================================\n\n// get oldest archive from ftp directory\nfunction getOldestArchive() {\n\tvar dfd = $.Deferred();\n\n\t$.ajax( {\n\t\turl: 'modules/archive/archive.php',\n\t\ttype: 'GET',\n\t\tdata: {'action': 'getOldestArchive'},\n\t\tsuccess: function(res, status) {\n\t\t\tdfd.resolve(res);\n\t\t},\n\t\terror: function(xhr, desc, err) {\n\t            console.log(xhr);\n\t            console.log(\"Details: \" + desc + \"\\nError: \" + err);\n\t    }\n\t});\n\n\treturn dfd.promise();\n}\n\n// get archive's dir names in working, pending, and problems dirs\nfunction getArchives() {\n\tvar dfd = $.Deferred();\n\n\t$.ajax( {\n\t\turl: 'modules/archive/archive.php',\n\t\ttype: 'GET',\n\t\tdata: {'action': 'getArchives'},\n\t\tsuccess: function(res, status) {\n\t\t\tdfd.resolve(JSON.parse(res));\n\t\t},\n\t\terror: function(xhr, desc, err) {\n\t            console.log(xhr);\n\t            console.log(\"Details: \" + desc + \"\\nError: \" + err);\n\t    }\n\t});\n\n\treturn dfd.promise();\n}\n\n// get one archive's properties\nfunction getOneArchive(archive, id, status) {\n\tvar dfd = $.Deferred();\n\n\t$.ajax( {\n\t\turl: 'modules/archive/archive.php',\n\t\ttype: 'GET',\n\t\tdatatype: 'JSON',\n\t\tdata: {\n\t\t\t'action': 'getOneArchive',\n\t\t\t'status': status,\n\t\t\t'subId': id,\n\t\t\t'archive': archive\n\t\t},\n\t\tsuccess: function(res, status) {\n\t\t\tdfd.resolve(JSON.parse(res));\n\t\t},\n\t\terror: function(xhr, desc, err) {\n            console.log(xhr);\n            console.log(\"Details: \" + desc + \"\\nError: \" + err);\n        }\n\t});\n\n\treturn dfd.promise();\n}\n\n// move archive to pending dir\nfunction postFormData(archive) {\n\n\n\tconsole.log(archive);\n\n\tvar dfd = $.Deferred();\n\n\t$.ajax( {\n\t\turl: 'modules/archive/archive.php',\n\t\ttype: 'POST',\n\t\tdata: {\n\t\t\t'action': 'postFormData',\n\t\t\t'archive': archive.name,\n\t\t\t'status': archive.status,\n\t\t\t'subId': archive.subId,\n\t\t\t'data': $('#xmlEdit').serialize()\n\t\t},\n\t\tsuccess: function(res, status) {\n\t\t\tdfd.resolve(JSON.parse(res));\n\t\t},\n\t\terror: function(xhr, desc, err) {\n            console.log(xhr);\n            console.log(\"Details: \" + desc + \"\\nError: \" + err);\n        }\n\t});\n\n\treturn dfd.promise();\n}\n\n\n\n\n\n\n\n\n","function mapDb(archive) {\n\t\n\treturn [\n\t\t{\n\t\t\t\"name\": \"Editor\",\n\t\t\t\"id\": \"identikey\",\n\t\t\t\"data\": identikey,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": true\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Archive Name\",\n\t\t\t\"id\": \"sequence_num\",\n\t\t\t\"data\": archive.name,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": true\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Title\",\n\t\t\t\"id\": \"title\",\n\t\t\t\"data\": archive.db.title,\n\t\t\t\"type\": \"text-long\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Full Text Url\",\n\t\t\t\"id\": \"fulltext_url\",\n\t\t\t\"data\": archive.readyUrl + archive.pdf,\n\t\t\t\"type\": \"url\",\n\t\t\t\"readonly\": true\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Keywords\",\n\t\t\t\"id\": \"keywords\",\n\t\t\t\"data\": archive.db.keywords,\n\t\t\t\"type\": \"text-long\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Abstract\",\n\t\t\t\"id\": \"abstract\",\n\t\t\t\"data\": archive.db.abstract,\n\t\t\t\"type\": \"text-long\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 FName\",\n\t\t\t\"id\": \"author1_fname\",\n\t\t\t\"data\": archive.db.author1_fname,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 MName\",\n\t\t\t\"id\": \"author1_mname\",\n\t\t\t\"data\": archive.db.author1_mname,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 LName\",\n\t\t\t\"id\": \"author1_lname\",\n\t\t\t\"data\": archive.db.author1_lname,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 Suffix\",\n\t\t\t\"id\": \"author1_suffix\",\n\t\t\t\"data\": archive.db.author1_suffix,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 Email\",\n\t\t\t\"id\": \"author1_email\",\n\t\t\t\"data\": archive.db.author1_email,\n\t\t\t\"type\": \"email\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 Institution\",\n\t\t\t\"id\": \"author1_institution\",\n\t\t\t\"data\": archive.db.author1_institution,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor1\",\n\t\t\t\"id\": \"advisor1\",\n\t\t\t\"data\": archive.db.advisor1,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor2\",\n\t\t\t\"id\": \"advisor2\",\n\t\t\t\"data\": archive.db.advisor2,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor3\",\n\t\t\t\"id\": \"advisor3\",\n\t\t\t\"data\": archive.db.advisor3,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor4\",\n\t\t\t\"id\": \"advisor4\",\n\t\t\t\"data\": archive.db.advisor4,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor5\",\n\t\t\t\"id\": \"advisor5\",\n\t\t\t\"data\": archive.db.advisor5,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Disciplines\",\n\t\t\t\"id\": \"disciplines\",\n\t\t\t\"data\": archive.db.disciplines,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Comments\",\n\t\t\t\"id\": \"comments\",\n\t\t\t\"data\": archive.db.comments,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Degree Name\",\n\t\t\t\"id\": \"degree_name\",\n\t\t\t\"data\": archive.db.degree_name,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Department\",\n\t\t\t\"id\": \"department\",\n\t\t\t\"data\": archive.db.department,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Document Type\",\n\t\t\t\"id\": \"document_type\",\n\t\t\t\"data\": archive.db.document_type,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Embargo Date\",\n\t\t\t\"id\": \"embargo_date\",\n\t\t\t\"data\": archive.db.embargo_date,\n\t\t\t\"type\": \"date\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Publication Date\",\n\t\t\t\"id\": \"publication_date\",\n\t\t\t\"data\": archive.db.publication_date,\n\t\t\t\"type\": \"date\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Season\",\n\t\t\t\"id\": \"season\",\n\t\t\t\"data\": archive.db.season,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t}\n\t];\n}\n","function mapJson(archive) {\n\n\t\n\treturn [\n\t\t{\n\t\t\t\"name\": \"Editor\",\n\t\t\t\"id\": \"identikey\",\n\t\t\t\"data\": identikey,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": true\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Archive Name\",\n\t\t\t\"id\": \"sequence_num\",\n\t\t\t\"data\": archive.name,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": true\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Title\",\n\t\t\t\"id\": \"title\",\n\t\t\t\"data\": archive.json.description.title.toTitleCase(),\n\t\t\t\"type\": \"text-long\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Full Text Url\",\n\t\t\t\"id\": \"fulltext_url\",\n\t\t\t\"data\": archive.readyUrl + archive.pdf,\n\t\t\t\"type\": \"url\",\n\t\t\t\"readonly\": true\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Keywords\",\n\t\t\t\"id\": \"keywords\",\n\t\t\t\"data\": archive.json.description.categorization.keyword,\n\t\t\t\"type\": \"text-long\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Abstract\",\n\t\t\t\"id\": \"abstract\",\n\t\t\t\"data\": concatParas(archive.json.content.abstract.para),\n\t\t\t\"type\": \"text-long\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 FName\",\n\t\t\t\"id\": \"author1_fname\",\n\t\t\t\"data\": archive.json.authorship.author.name.fname,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 MName\",\n\t\t\t\"id\": \"author1_mname\",\n\t\t\t\"data\": (archive.json.authorship.author.name.middle[0]) ? archive.json.authorship.author.name.middle : undefined,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 LName\",\n\t\t\t\"id\": \"author1_lname\",\n\t\t\t\"data\": archive.json.authorship.author.name.surname,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 Suffix\",\n\t\t\t\"id\": \"author1_suffix\",\n\t\t\t\"data\": (archive.json.authorship.author.name.suffix[0]) ? archive.json.authorship.author.name.suffix : undefined,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 Email\",\n\t\t\t\"id\": \"author1_email\",\n\t\t\t\"data\": archive.json.authorship.author.contact[1].email || archive.json.authorship.author.contact[0].email,\n\t\t\t\"type\": \"email\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Author1 Institution\",\n\t\t\t\"id\": \"author1_institution\",\n\t\t\t\"data\": archive.json.description.institution.inst_name,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor1\",\n\t\t\t\"id\": \"advisor1\",\n\t\t\t\"data\": (archive.json.description.cmte_member[0]) ? archive.json.description.cmte_member[0].name.surname + ', ' + archive.json.description.cmte_member[0].name.fname : undefined,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor2\",\n\t\t\t\"id\": \"advisor2\",\n\t\t\t\"data\": (archive.json.description.cmte_member[1]) ? archive.json.description.cmte_member[1].name.surname + ', ' + archive.json.description.cmte_member[1].name.fname : undefined,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor3\",\n\t\t\t\"id\": \"advisor3\",\n\t\t\t\"data\": (archive.json.description.cmte_member[2]) ? archive.json.description.cmte_member[2].name.surname + ', ' + archive.json.description.cmte_member[2].name.fname : undefined,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor4\",\n\t\t\t\"id\": \"advisor4\",\n\t\t\t\"data\": (archive.json.description.cmte_member[3]) ? archive.json.description.cmte_member[3].name.surname + ', ' + archive.json.description.cmte_member[3].name.fname : undefined,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Advisor5\",\n\t\t\t\"id\": \"advisor5\",\n\t\t\t\"data\": (archive.json.description.cmte_member[4]) ? archive.json.description.cmte_member[4].name.surname + ', ' + archive.json.description.cmte_member[4].name.fname : undefined,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Disciplines\",\n\t\t\t\"id\": \"disciplines\",\n\t\t\t\"data\": archive.json.description.institution.inst_contact,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Comments\",\n\t\t\t\"id\": \"comments\",\n\t\t\t\"data\": \"\",\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Degree Name\",\n\t\t\t\"id\": \"degree_name\",\n\t\t\t\"data\": archive.json.description.degree.replace(/\\./g, ''),\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Department\",\n\t\t\t\"id\": \"department\",\n\t\t\t\"data\": archive.json.description.institution.inst_contact,\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Document Type\",\n\t\t\t\"id\": \"document_type\",\n\t\t\t\"data\": (archive.json.description.attributes.type === 'doctoral') ? 'Dissertation' : 'Thesis',\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Embargo Date\",\n\t\t\t\"id\": \"embargo_date\",\n\t\t\t\"data\": embargoDate(archive.json.attributes.embargo_code),\n\t\t\t\"type\": \"date\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Publication Date\",\n\t\t\t\"id\": \"publication_date\",\n\t\t\t\"data\": archive.json.description.dates.comp_date + '-01-01',\n\t\t\t\"type\": \"date\",\n\t\t\t\"readonly\": false\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Season\",\n\t\t\t\"id\": \"season\",\n\t\t\t\"data\": \"Spring\",\n\t\t\t\"type\": \"text\",\n\t\t\t\"readonly\": false\n\t\t}\n\t];\n}\n\nString.prototype.toTitleCase = function() {\n  var i, j, str, lowers, uppers;\n  str = this.replace(/([^\\W_]+[^\\s-]*) */g, function(txt) {\n    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n  });\n\n  // Certain minor words should be left lowercase unless \n  // they are the first or last words in the string\n  lowers = ['A', 'An', 'The', 'And', 'But', 'Or', 'For', 'Nor', 'As', 'At', \n  'By', 'For', 'From', 'In', 'Into', 'Near', 'Of', 'On', 'Onto', 'To', 'With'];\n  for (i = 0, j = lowers.length; i < j; i++)\n    str = str.replace(new RegExp('\\\\s' + lowers[i] + '\\\\s', 'g'), \n      function(txt) {\n        return txt.toLowerCase();\n      });\n\n  // Certain words such as initialisms or acronyms should be left uppercase\n  uppers = ['Id', 'Tv'];\n  for (i = 0, j = uppers.length; i < j; i++)\n    str = str.replace(new RegExp('\\\\b' + uppers[i] + '\\\\b', 'g'), \n      uppers[i].toUpperCase());\n\n  return str;\n};\n\nvar embargoDate = function(code) {\n\t// get todays date and format for HTML5 date format ie yyyy-mm-dd\n\tvar now = new Date();\n\tvar day = (\"0\" + now.getDate()).slice(-2);\n\tvar month = (\"0\" + (now.getMonth() + 1)).slice(-2);\n\tvar today = now.getFullYear()+\"-\"+(month)+\"-\"+(day);\n\n\tif (code === '0') {\n\t\treturn today;\n\t}\n\n};\n\n// concat the paragraphs under abstract adding <p></p> tags if multiple paragraphs\nvar concatParas = function(paras) {\n\tif (typeof(paras) === 'object') {\n\t\tvar str = '';\n\t\tfor (var i = 0; i < paras.length; i++) {\n\t\t\tstr += '<p>' + paras[i] + '</p>';\n\t\t}\n\t\treturn str;\n\t} else {\n\t\treturn paras;\n\t}\n}\n\n"]}